**tb文件补充**：

```verilog
initial begin
// 指定生成的波形文件名
    $fsdbDumpfile("tb.fsdb");
// 转储所有信号，0 表示当前模块及以下所有层级
    $fsdbDumpvars(0, tb);
end
```

### 一、 深度理解：VCS 与 Verdi 的分工

你可以把这个过程想象成**拍电影**：

| **工具**  | **角色**           | **产出物**                                                   | **核心作用**                                                 |
| --------- | ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **VCS**   | **摄制组（引擎）** | `simv` (可执行文件)、`waveform.fsdb` (胶片)、`sim.log` (场记) | **执行逻辑运算**。它根据你的 RTL 和 TB，计算出每一个时刻信号该是 0 还是 1。没有它，就没有数据。 |
| **Verdi** | **放映机+剪辑台**  | 无（它主要读取 VCS 的产出物）                                | **可视化与追踪**。它把枯燥的二进制数据转化成波形、电路图，并让你在源码和波形之间自由跳转。 |

**重点确实是 `.fsdb` 文件**。它记录了仿真时间内所有信号的跳变历史。VCS 跑完之后确实“没它事了”，除非你需要重新修改代码再次仿真。

------

### 二、 Verdi 的“进阶生存指南” (超越 Ctrl+W)

为了在汇报中展现专业性，你需要掌握以下四个神技：

#### 1. 信号追踪 (Tracing) —— 找 Bug 的核心

当你发现波形上某个信号值不对时（比如本该是 1 却变成了 0），不要去一行行看代码！

- **神技：双击波形名**。在波形窗口双击信号名，Verdi 会自动跳转到源代码中定义该信号的位置。
- **找出处 (Driver)**：在源码窗口，选中信号点击 **工具栏上的“向左箭头” (Go to Driver)**。Verdi 会瞬间告诉你：是谁在给这个信号赋值。
- **看去向 (Load)**：点击 **“向右箭头” (Go to Load)**，看这个信号被谁用到了。

#### 2. 源码值标注 (Active Annotation)

不需要拉出所有信号，你就能看到值。

- **快捷键：`x`**。在源码窗口按下 `x`。
- **效果**：源码每一行变量的下方会直接显示它在当前时间点的数值。你拖动波形的时间轴，源码里的数字会跟着变。这能让你像调试 C 语言一样直观。

#### 3. 电路图模式 (nSchema) —— 汇报利器

老师最喜欢看图。

- **操作**：在源码界面点击工具栏上的 **“逻辑门”图标 (New Schematic)**。
- **效果**：Verdi 会把你的 Verilog 代码自动转换成 **门级电路图**。
- **汇报技巧**：你可以双击电路图里的线，波形窗口就会自动增加这根线。这证明你不仅懂代码，还懂底层电路结构。

#### 4. 搜索与标记 (Search & Marker)

- **搜索变化**：右键波形 -> **Search Value**。可以直接搜这个信号什么时候变成了 `1` 或者什么时候变成了 `4'hA`。
- **测量时间 (Delta)**：按住 `Shift` 键点击两个边沿，Verdi 会自动显示这两个点之间的时间差（例如 $20ns$）。在报告里展示这个，能证明你的时序是严格对齐的。

------

### 三、 汇报时的“高级”展示策略

除了贴一张黑漆漆的波形图，你还可以展示：

1. **信号分组 (Group)**：在波形左侧，右键信号 -> **Group**。把 `in` 和 `sel` 分成一组，起名 `Inputs`；把 `out` 分成一组。显得你组织严密。
2. **进制转换**：对于多位信号（如 `in[3:0]`），右键 -> **Radix** -> **Hexadecimal** 或 **Binary**。
3. **保存配置 (Save Session)**：点击 **File -> Save Window Config (as .rc file)**。
   - *好处*：下次打开 Verdi，你拉好的信号、分好的组、调好的颜色会自动恢复，不用重新 `Ctrl+W`。

------

### 🏁 现在你可以尝试的操作

1. 打开你的 4x1 Mux 的 Verdi 窗口。
2. **尝试 Tracing**：双击 `out` 信号，看看它能不能带你找到 `assign out = in[sel];` 那一行。
3. **尝试逻辑图**：点开 nSchema，看看 Verdi 帮你生成的 4x1 Mux 电路长什么样。

**你现在的 Verdi 窗口里，能看到 `in[sel]` 在不同 `sel` 下的变化了吗？如果你准备好了，我们可以聊聊周五的任务：如何写一个带“异步复位”的 D 触发器，这在波形上会比 Mux 复杂得多。**